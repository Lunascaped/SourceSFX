const GAMES={hl2:{name:"Half-Life 2",repo:"sourcesounds/hl2"},hl1:{name:"Half-Life",repo:"sourcesounds/hl1"},bshift:{name:"Half-Life: Blue Shift",repo:"sourcesounds/bshift"},episodic:{name:"Half-Life 2: Episode One",repo:"sourcesounds/episodic"},ep2:{name:"Half-Life 2: Episode Two",repo:"sourcesounds/ep2"},hl2dm:{name:"Half-Life 2: Deathmatch",repo:"sourcesounds/hl2dm"},lostcoast:{name:"Half-Life 2: Lost Coast",repo:"sourcesounds/lostcoast"},tf2:{name:"Team Fortress 2",repo:"sourcesounds/tf2"},tfc:{name:"Team Fortress Classic",repo:"sourcesounds/tfc"},cstrike:{name:"Counter-Strike: Source",repo:"sourcesounds/cstrike"},csgo:{name:"Counter-Strike: Global Offensive",repo:"sourcesounds/csgo"},czero:{name:"Counter-Strike: Condition Zero",repo:"sourcesounds/czero"},portal:{name:"Portal",repo:"sourcesounds/portal"},portal2:{name:"Portal 2",repo:"sourcesounds/portal2"},left4dead:{name:"Left 4 Dead",repo:"sourcesounds/left4dead"},left4dead2:{name:"Left 4 Dead 2",repo:"sourcesounds/left4dead2"},dod:{name:"Day of Defeat",repo:"sourcesounds/dod"},dods:{name:"Day of Defeat: Source",repo:"sourcesounds/dods"},garrysmod:{name:"Garry's Mod",repo:"sourcesounds/garrysmod"},zps:{name:"Zombie Panic! Source",repo:"sourcesounds/zps"}};let currentGame="hl2",allSounds=[],filteredSounds=[],currentAudioUrl=null,currentAudioBlob=null,currentFileName=null,isSeeking=!1,fuse=null,rafId=null,lastTimeDisplayUpdate=0;const gameSelect=document.getElementById("gameSelect"),searchInput=document.getElementById("searchInput"),categoryFilter=document.getElementById("categoryFilter"),soundList=document.getElementById("soundList"),soundCount=document.getElementById("soundCount"),loadingMessage=document.getElementById("loadingMessage"),errorMessage=document.getElementById("errorMessage"),audioPlayer=document.getElementById("audioPlayer"),audioPlayerContainer=document.getElementById("audioPlayerContainer"),nowPlaying=document.getElementById("nowPlaying"),downloadBtn=document.getElementById("downloadBtn"),closePlayer=document.getElementById("closePlayer"),playPauseBtn=document.getElementById("playPauseBtn"),playIcon=document.getElementById("playIcon"),pauseIcon=document.getElementById("pauseIcon"),progressBar=document.getElementById("progressBar"),progressBarContainer=document.getElementById("progressBarContainer"),timeDisplay=document.getElementById("timeDisplay"),autoplayToggle=document.getElementById("autoplayToggle"),volumeSlider=document.getElementById("volumeSlider"),volumeBtn=document.getElementById("volumeBtn"),volumeIcon=document.getElementById("volumeIcon"),mutedIcon=document.getElementById("mutedIcon");function setupEventListeners(){gameSelect.addEventListener("change",onGameChange),searchInput.addEventListener("input",debounce(filterSounds,300)),categoryFilter.addEventListener("change",filterSounds),closePlayer.addEventListener("click",closeAudioPlayer),downloadBtn.addEventListener("click",downloadCurrentSound),playPauseBtn.addEventListener("click",togglePlayPause),progressBarContainer.addEventListener("pointerdown",startSeek),volumeSlider.addEventListener("input",onVolumeChange),volumeBtn.addEventListener("click",toggleMute),audioPlayer.addEventListener("loadedmetadata",updateDuration),audioPlayer.addEventListener("timeupdate",onTimeUpdateThrottled),audioPlayer.addEventListener("ended",onAudioEnded),audioPlayer.addEventListener("play",(()=>{playIcon.style.display="none",pauseIcon.style.display="block",playPauseBtn.setAttribute("aria-label","Pause"),startProgressLoop()})),audioPlayer.addEventListener("pause",(()=>{playIcon.style.display="block",pauseIcon.style.display="none",playPauseBtn.setAttribute("aria-label","Play"),stopProgressLoop(),updateTimeDisplay(!0)}))}function onGameChange(){currentGame=gameSelect.value,closeAudioPlayer(),loadSounds()}async function loadSounds(){try{loadingMessage.style.display="block",errorMessage.style.display="none",soundList.innerHTML="";const e=`../data/sounds-${currentGame}.json`,t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch sounds-${currentGame}.json`);allSounds=await t.json(),filteredSounds=[...allSounds],initializeFuse(),loadingMessage.style.display="none",displaySounds(),updateStats(),populateCategories()}catch(e){console.error("Error loading sounds:",e),loadingMessage.style.display="none",errorMessage.style.display="block"}}function initializeFuse(){fuse=new Fuse(allSounds,{keys:[{name:"fileName",weight:2},{name:"path",weight:1},{name:"displayName",weight:2},{name:"category",weight:.5}],threshold:.4,distance:100,minMatchCharLength:2,ignoreLocation:!0,includeScore:!0})}function populateCategories(){const e=[...new Set(allSounds.map((e=>e.category)))].sort();categoryFilter.innerHTML='<option value="all">All Categories</option>',e.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e.charAt(0).toUpperCase()+e.slice(1),categoryFilter.appendChild(t)})),updateCustomSelect("categoryFilter")}function filterSounds(){const e=searchInput.value.trim(),t=categoryFilter.value;let o;if(e.length>=2){o=fuse.search(e).map((e=>e.item))}else o=0===e.length?[...allSounds]:[];filteredSounds=o.filter((e=>"all"===t||e.category===t)),displaySounds(),updateStats()}function displaySounds(){soundList.innerHTML="",0!==filteredSounds.length?filteredSounds.forEach((e=>{const t=createSoundItem(e);soundList.appendChild(t)})):soundList.innerHTML='\n            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #888;">\n                No sounds found matching your criteria.\n            </div>\n        '}function createSoundItem(e){const t=document.createElement("div");return t.className="sound-item",t.innerHTML=`\n        <div class="sound-category">${e.category}</div>\n        <div class="sound-name">${e.displayName}</div>\n        <div class="sound-path">${e.path}</div>\n    `,t.addEventListener("click",(()=>playSound(e))),t}async function playSound(e,t=!1){const o=`https://raw.githubusercontent.com/${GAMES[currentGame].repo}/refs/heads/master/${e.path}`;currentAudioUrl=o,currentFileName=e.fileName,progressBar.style.transform="scaleX(0)",timeDisplay.textContent="0:00 / 0:00",stopProgressLoop(),fetchAudioBlob(o),audioPlayer.src=o;autoplayToggle.checked||t?audioPlayer.play().then((()=>{startProgressLoop()})).catch((e=>{console.error("Error playing audio:",e)})):audioPlayer.load(),nowPlaying.textContent=`Now Playing: ${e.displayName}`,audioPlayerContainer.style.display="block"}async function fetchAudioBlob(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch audio");currentAudioBlob=await t.blob()}catch(e){console.error("Error fetching audio blob:",e),currentAudioBlob=null}}function closeAudioPlayer(){audioPlayer.pause(),stopProgressLoop(),audioPlayerContainer.style.display="none",currentAudioUrl=null,currentAudioBlob=null,currentFileName=null,progressBar.style.transform="scaleX(0)",playIcon.style.display="block",pauseIcon.style.display="none",playPauseBtn.setAttribute("aria-label","Play")}function downloadCurrentSound(){if(!currentAudioBlob||!currentFileName)return void console.error("Audio blob not ready yet");const e=URL.createObjectURL(currentAudioBlob),t=document.createElement("a");t.href=e,t.download=currentFileName,document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout((()=>{URL.revokeObjectURL(e)}),100)}function togglePlayPause(){audioPlayer.paused?audioPlayer.play():audioPlayer.pause()}function startProgressLoop(){rafId&&cancelAnimationFrame(rafId);const e=()=>{if(audioPlayer.paused||isSeeking||!audioPlayer.duration)rafId=null;else{const t=audioPlayer.currentTime/audioPlayer.duration;progressBar.style.transform=`scaleX(${t})`,updateTimeDisplay(!1),rafId=requestAnimationFrame(e)}};rafId=requestAnimationFrame(e)}function stopProgressLoop(){rafId&&(cancelAnimationFrame(rafId),rafId=null)}function onTimeUpdateThrottled(){updateTimeDisplay(!1)}function updateProgress(){if(!isSeeking&&audioPlayer.duration){const e=audioPlayer.currentTime/audioPlayer.duration;progressBar.style.transform=`scaleX(${e})`,updateTimeDisplay(!1)}}function updateTimeDisplay(e=!1){const t=performance.now();if(!e&&t-lastTimeDisplayUpdate<150)return;lastTimeDisplayUpdate=t;const o=formatTime(audioPlayer.currentTime||0),n=formatTime(audioPlayer.duration||0);timeDisplay.textContent=`${o} / ${n}`}function updateDuration(){updateTimeDisplay(!0)}function clamp(e,t,o){return Math.max(t,Math.min(o,e))}function eventToPercent(e){const t=progressBarContainer.getBoundingClientRect();return clamp(e-t.left,0,t.width)/t.width}function seekToPercent(e){if(e=clamp(e,0,1),!isFinite(audioPlayer.duration)||audioPlayer.readyState<2){const t=e,o=()=>{isFinite(audioPlayer.duration)&&(audioPlayer.currentTime=t*audioPlayer.duration,progressBar.style.transform=`scaleX(${t})`,updateTimeDisplay(!0)),audioPlayer.removeEventListener("loadedmetadata",o),audioPlayer.removeEventListener("canplay",o)};return audioPlayer.addEventListener("loadedmetadata",o),void audioPlayer.addEventListener("canplay",o)}audioPlayer.currentTime=e*audioPlayer.duration,progressBar.style.transform=`scaleX(${e})`,updateTimeDisplay(!0)}function startSeek(e){e.preventDefault();try{progressBarContainer.setPointerCapture(e.pointerId)}catch{}isSeeking=!0,progressBar.classList.add("seeking"),stopProgressLoop();seekToPercent(eventToPercent(e.clientX)),progressBarContainer.addEventListener("pointermove",onSeekMove),progressBarContainer.addEventListener("pointerup",endSeek),progressBarContainer.addEventListener("pointercancel",endSeek)}function onSeekMove(e){if(!isSeeking)return;const t=eventToPercent(e.clientX);if(progressBar.style.transform=`scaleX(${t})`,isFinite(audioPlayer.duration)){const e=t*audioPlayer.duration;timeDisplay.textContent=`${formatTime(e)} / ${formatTime(audioPlayer.duration)}`}}function endSeek(e){if(!isSeeking)return;seekToPercent(eventToPercent(e.clientX)),isSeeking=!1,progressBar.classList.remove("seeking");try{progressBarContainer.releasePointerCapture(e.pointerId)}catch{}progressBarContainer.removeEventListener("pointermove",onSeekMove),progressBarContainer.removeEventListener("pointerup",endSeek),progressBarContainer.removeEventListener("pointercancel",endSeek),audioPlayer.paused||startProgressLoop()}function onAudioEnded(){playIcon.style.display="block",pauseIcon.style.display="none",playPauseBtn.setAttribute("aria-label","Play"),stopProgressLoop(),progressBar.style.transform="scaleX(0)",audioPlayer.currentTime=0,updateTimeDisplay(!0)}function formatTime(e){if(isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}function updateStats(){const e=GAMES[currentGame].name;soundCount.textContent=`${e}: Showing ${filteredSounds.length} of ${allSounds.length} sounds`}function debounce(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout((()=>{clearTimeout(o),e(...n)}),t)}}function initCustomSelects(){document.querySelectorAll(".filter-select").forEach((e=>{createCustomSelect(e)}))}function createCustomSelect(e){const t=document.createElement("div");t.className="custom-select-wrapper";const o=document.createElement("div");o.className="custom-select-trigger";const n=document.createElement("span");n.className="custom-select-text",n.textContent=e.options[e.selectedIndex].text;const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("class","custom-select-arrow"),a.setAttribute("viewBox","0 0 12 12"),a.setAttribute("width","12"),a.setAttribute("height","12");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill","#ff6600"),r.setAttribute("d","M6 9L1 4h10z"),a.appendChild(r),o.appendChild(n),o.appendChild(a);const s=document.createElement("div");s.className="custom-select-options";let l=0;Array.from(e.children).forEach((t=>{if("OPTGROUP"===t.tagName){const o=document.createElement("div");o.className="custom-select-option optgroup-label",o.textContent=t.label,s.appendChild(o),Array.from(t.children).forEach((t=>{const o=document.createElement("div");o.className="custom-select-option optgroup-item",o.textContent=t.text,o.dataset.value=t.value,o.dataset.index=l,t.selected&&o.classList.add("selected"),o.addEventListener("click",(()=>{selectOption(e,o,n,s)})),s.appendChild(o),l++}))}else if("OPTION"===t.tagName){const o=document.createElement("div");o.className="custom-select-option",o.textContent=t.text,o.dataset.value=t.value,o.dataset.index=l,t.selected&&o.classList.add("selected"),o.addEventListener("click",(()=>{selectOption(e,o,n,s)})),s.appendChild(o),l++}})),o.addEventListener("click",(e=>{e.stopPropagation(),closeAllSelects(t),o.classList.toggle("active"),s.classList.toggle("active")})),e.parentNode.insertBefore(t,e),t.appendChild(o),t.appendChild(s),t.dataset.selectId=e.id}function selectOption(e,t,o,n){e.selectedIndex=t.dataset.index;const a=new Event("change",{bubbles:!0});e.dispatchEvent(a),o.textContent=t.textContent,n.querySelectorAll(".custom-select-option").forEach((e=>{e.classList.remove("selected")})),t.classList.add("selected"),n.classList.remove("active"),n.previousElementSibling.classList.remove("active")}function closeAllSelects(e=null){document.querySelectorAll(".custom-select-wrapper").forEach((t=>{t!==e&&(t.querySelector(".custom-select-trigger")?.classList.remove("active"),t.querySelector(".custom-select-options")?.classList.remove("active"))}))}function updateCustomSelect(e){const t=document.querySelector(`.custom-select-wrapper[data-select-id="${e}"]`);if(!t)return;const o=document.getElementById(e),n=t.querySelector(".custom-select-options"),a=t.querySelector(".custom-select-text");n.innerHTML="",Array.from(o.options).forEach(((e,t)=>{const r=document.createElement("div");r.className="custom-select-option",r.textContent=e.text,r.dataset.value=e.value,r.dataset.index=t,e.selected&&(r.classList.add("selected"),a.textContent=e.text),r.addEventListener("click",(()=>{selectOption(o,r,a,n)})),n.appendChild(r)}))}function initializeVolume(){const e=localStorage.getItem("audioVolume"),t=null!==e?parseFloat(e):100;volumeSlider.value=t,audioPlayer.volume=t/100,updateVolumeSliderStyle(t),updateVolumeIcon(t)}function onVolumeChange(e){const t=parseFloat(e.target.value);audioPlayer.volume=t/100,localStorage.setItem("audioVolume",t),updateVolumeSliderStyle(t),updateVolumeIcon(t)}function updateVolumeSliderStyle(e){volumeSlider.style.setProperty("--volume-percent",`${e}%`)}function updateVolumeIcon(e){0===e?(volumeIcon.style.display="none",mutedIcon.style.display="block",volumeBtn.setAttribute("aria-label","Unmute")):(volumeIcon.style.display="block",mutedIcon.style.display="none",volumeBtn.setAttribute("aria-label","Mute"))}function toggleMute(){if(audioPlayer.volume>0)localStorage.setItem("previousVolume",volumeSlider.value),volumeSlider.value=0,audioPlayer.volume=0,updateVolumeSliderStyle(0),updateVolumeIcon(0);else{const e=localStorage.getItem("previousVolume")||100;volumeSlider.value=e,audioPlayer.volume=e/100,updateVolumeSliderStyle(e),updateVolumeIcon(e)}}document.addEventListener("DOMContentLoaded",(()=>{initCustomSelects(),loadSounds(),setupEventListeners(),initializeVolume()})),document.addEventListener("click",(()=>{closeAllSelects()}));
//# sourceMappingURL=/js/sourcemaps/script.min.js.map